# Copilot Instructions

## Project Overview

**fylr-ipt-proxy** is a Symfony 7.3 web application that serves as a bridge between easydb5/fylr and GBIF via IPT. It stores Darwin Core data received from easydb webhooks in a PostgreSQL database for export to GBIF through an IPT instance.

## Development Environment

- **Docker-based**: Use `docker compose` for local development with FrankenPHP, PostgreSQL, and Symfony Messenger
- **PHP 8.2+**: Follow modern PHP practices (typed properties, attributes, named arguments)
- **Entity Generation**: Most entities in `src/Entity/DarwinCore/` are auto-generated by `bin/console app:dwc-scheme-to-entity`. Do not manually edit these files.

## Symfony & PHP Best Practices

- Use **PHP 8 attributes** for routing, Doctrine ORM mappings, and dependency injection (`#[Route]`, `#[ORM\Entity]`, `#[AsCommand]`)
- Prefer **constructor property promotion** for services
- Use **Symfony's dependency injection** via autowiring
- Follow **PSR-12** coding standards
- Use **typed properties and return types** everywhere
- Leverage **Symfony Messenger** for async job processing
- Use **Doctrine migrations** for schema changes (`bin/console make:migration`)
- Use **EasyAdmin** for admin CRUD interfaces
- Use **Symfony UX Turbo** for enhanced UX where it makes sense. Be aware that it's used for forms.

## Key Commands

```bash
docker compose exec php bin/console <command>  # Run Symfony commands
docker compose exec php bin/console app:dwc-scheme-to-entity  # Regenerate DwC entities
docker compose exec php bin/console doctrine:migrations:migrate  # Apply migrations
```
