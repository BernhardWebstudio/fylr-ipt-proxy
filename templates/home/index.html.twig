{% extends 'base.html.twig' %}

{% block title %}
	{{ 'home.title'|trans }}
{% endblock %}

{% block body %}
	<div class="example-wrapper">
		<h1>{{ 'home.hello'|trans }}
			{% if app.user %},
				{{ app.user.userIdentifier }}
			{% endif %}!</h1>

		<p>{{ 'home.description'|trans }}</p>

		{% if app.user %}
			<p>{{ 'home.logged_in_message'|trans }}</p>

			<div class="card mt-3">
				<div class="card-header">
					<i class="fa fa-bar-chart" aria-hidden="true"></i>
					{{ 'home.current_data_overview'|trans }}
				</div>
				<div class="card-body">
					<div class="row">
						<div class="col-md-4">
							<div class="stat-tile">
								<div class="stat-label">{{ 'home.total_specimen'|trans }}</div>
								<div class="stat-value">{{ stats.total ?? 0 }}</div>
							</div>
						</div>
						<div class="col-md-4">
							<div class="stat-tile">
								<div class="stat-label">{{ 'home.by_object_type'|trans }}</div>
								<ul class="list-unstyled mb-0">
									{% for row in stats.byType ?? [] %}
										<li>
											<span class="badge bg-primary">{{ row.objectType ?? ('label.unknown'|trans) }}</span>
											<span class="ms-2">{{ row.count }}</span>
										</li>
									{% else %}
										<li>{{ 'home.no_data_yet'|trans }}</li>
									{% endfor %}

									<!--
                                    <div class="mt-3" style="height: 320px;">
                                        <canvas data-controller="stats-chart" data-stats-chart-by-type-value='{{ (stats.byType ?? [])|json_encode|e('html_attr') }}' data-stats-chart-by-tag-value='{{ (stats.byTag ?? [])|json_encode|e('html_attr') }}'></canvas>
                                    </div>
									-->
								</ul>
							</div>
						</div>
						<div class="col-md-4">
							<div class="stat-tile">
								<div class="stat-label">{{ 'home.by_tag_id'|trans }}</div>
								<ul class="list-unstyled mb-0">
									{% for row in stats.byTag ?? [] %}
										<li>
											<span class="badge bg-secondary">{{ row.tagId ?? ('label.none'|trans) }}</span>
											<span class="ms-2">{{ row.count }}</span>
										</li>
									{% else %}
										<li>{{ 'home.no_data_yet'|trans }}</li>
									{% endfor %}
								</ul>
							</div>
						</div>
					</div>

					<hr/>
					<p class="text-muted">{{ 'home.stats_description'|trans }}</p>
				</div>
			</div>

			<div class="btn-group mt-3" role="group">
				<a href="{{ path('app_import_management') }}" class="btn btn-primary">
					<i class="fa fa-download" aria-hidden="true"></i>
					{{ 'home.import_data_from_nahima'|trans }}
				</a>
				<a href="{{ path('app_export_management') }}" class="btn btn-primary">
					<i class="fa fa-upload" aria-hidden="true"></i>
					{{ 'home.export_data_from_application'|trans }}
				</a>
				<a href="{{ path('app_jobs_list') }}" class="btn btn-secondary">
					<i class="fa fa-tasks" aria-hidden="true"></i>
					{{ 'home.job_history'|trans }}
				</a>
			</div>
		{% else %}
			<p>{{ 'home.please_log_in'|trans }}</p>

			<a href="{{ path('app_login') }}" class="btn btn-primary">{{ 'action.log_in'|trans }}</a>
		{% endif %}
	</div>
{% endblock %}
