<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>
			{% block title %}fylr IPT Proxy
			{% endblock %}
		</title>
		<link
		rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">

		<!-- Halfmoon CSS -->
		<link href="https://cdn.jsdelivr.net/npm/halfmoon@2.0.2/css/halfmoon.min.css" rel="stylesheet" integrity="sha256-RjeFzczeuZHCyS+Gvz+kleETzBF/o84ZRHukze/yv6o=" crossorigin="anonymous">

		{% block javascripts %}
			{% block importmap %}
				{{ importmap('app') }}
			{% endblock %}
		{% endblock %}
	</head>
	<body
		class="with-custom-webkit-scrollbars with-custom-css-scrollbars ps-md-sbwidth" data-dm-shortcut-enabled="true" data-sidebar-shortcut-enabled="true" data-set-preferred-mode-onload="true">

		<!-- Sidebar start -->
		<nav class="sidebar offcanvas-start offcanvas-md" tabindex="-1" id="main-menu-sidebar">
			<div class="offcanvas-header border-bottom border-secondary border-opacity-25">
				<a href="{{ path('app_home') }}" class="sidebar-brand">
					<strong>fylr IPT Proxy</strong>
				</a>

				<button type="button" class="btn-close d-md-none" data-bs-dismiss="offcanvas" aria-label="Close" data-bs-target="#main-menu-sidebar"></button>
			</div>
			<div class="offcanvas-body">
				<h5 class="sidebar-title">Navigation</h5>
				<ul class="sidebar-menu sidebar-nav">
					<li>
						<a href="{{ path('app_home') }}" class="sidebar-link nav-link {{ app.request.attributes.get('_route') == 'app_home' ? 'active' : '' }}">
							<i class="fa fa-home" aria-hidden="true"></i>
							Home
						</a>
					</li>

					{% if app.user %}
						<div class="sidebar-divider"></div>
						<li>
							<h5 class="sidebar-title">Data Management</h5>
						</li>

						<li class="nav-item">
							<a href="{{ path('app_import_management') }}" class="sidebar-link nav-link {{ app.request.attributes.get('_route') starts with 'app_import' ? 'active' : '' }}">
								<i class="fa fa-download" aria-hidden="true"></i>
								Import Data
							</a>
						</li>

						<li class="nav-item">
							<a href="{{ path('app_export_management') }}" class="sidebar-link nav-link {{ app.request.attributes.get('_route') starts with 'app_export' ? 'active' : '' }}">
								<i class="fa fa-upload" aria-hidden="true"></i>
								Export Data
							</a>
						</li>

						<li class="nav-item">
							<a href="{{ path('app_jobs_list') }}" class="sidebar-link nav-link {{ app.request.attributes.get('_route') starts with 'app_job' ? 'active' : '' }}">
								<i class="fa fa-tasks" aria-hidden="true"></i>
								Job History
							</a>
						</li>
					{% endif %}
				</ul>
			</div>
		</nav>
		<!-- Sidebar end -->


		<!-- Page wrapper start -->
		<div
			class="page-wrapper with-navbar">

			<!-- Navbar start -->
			<div class="navbar">
				<div class="navbar-content">
					<button class="btn btn-action d-md-none" type="button" id="sidebar-toggle" data-bs-toggle="offcanvas" data-bs-target="#main-menu-sidebar">
						<i class="fa fa-bars" aria-hidden="true"></i>
						<span class="sr-only">Toggle sidebar</span>
					</button>
				</div>

				<div class="navbar-content ms-auto">
					<a href="{{ path('app_home') }}" class="navbar-brand">
						<strong>fylr IPT Proxy</strong>
					</a>
				</div>

				<div class="navbar-content ms-auto">
					<div class="btn-group" role="group" aria-label="User actions">
						{% if app.user %}
							<div class="dropdown btn-group">
								<button class="btn dropdown-toggle" data-bs-toggle="dropdown" type="button" id="navbar-dropdown-toggle-btn-1" aria-expanded="false">
									{{ app.user.userIdentifier }}
								</button>
								<ul class="dropdown-menu dropdown-content">
									<li>
										<a href="{{ path('app_sync_roles') }}" class="dropdown-item">
											<i class="fa fa-sync" aria-hidden="true"></i>
											Sync Roles
										</a>
									</li>
									<li><hr class="dropdown-divider"></li>
									<li>
										<a href="{{ path('app_logout') }}" class="dropdown-item">
											<i class="fa fa-sign-out" aria-hidden="true"></i>
											Logout
										</a>
									</li>
								</ul>
							</div>
						{% else %}
							<a href="{{ path('app_login') }}" class="btn btn-primary">
								<i class="fa fa-sign-in" aria-hidden="true"></i>
								Login
							</a>
						{% endif %}

						<button class="btn btn-action" type="button" onclick="halfmoon.toggleDarkMode()">
							<i class="fa fa-moon-o" aria-hidden="true"></i>
							<span class="sr-only">Toggle dark mode</span>
						</button>
					</div>
				</div>
			</div>
			<!-- Navbar end -->

			<!-- Content wrapper start -->
			<div class="content-wrapper">
				{% for label, messages in app.flashes %}
					{% for message in messages %}
						<div class="alert alert-{{ label == 'error' ? 'danger' : label }} alert-dismissible" role="alert">
							{{ message }}
							<button class="btn-close" type="button" data-bs-dismiss="alert" aria-label="Close"></button>
						</div>
					{% endfor %}
				{% endfor %}

				{% block body %}{% endblock %}
			</div>
			<!-- Content wrapper end -->

		</div>
		<!-- Page wrapper end -->

		<!-- Option 1: Bootstrap JS bundle with Popper -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha256-CDOy6cOibCWEdsRiZuaHf8dSGGJRYuBGC+mjoJimHGw=" crossorigin="anonymous"></script>

		<!-- FontAwesome for icons -->
		<script src="https://use.fontawesome.com/releases/v5.15.4/js/all.js"></script>

		{% block body_javascripts %}{% endblock %}
	</body>
</html>
