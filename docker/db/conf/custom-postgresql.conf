# PostgreSQL SSL and External Access Configuration
# This file is appended to the main postgresql.conf

# Enable SSL connections
ssl = on
ssl_cert_file = '/var/lib/postgresql/ssl/server.crt'
ssl_key_file = '/var/lib/postgresql/ssl/server.key'
ssl_ca_file = '/var/lib/postgresql/ssl/ca.crt'

# Listen on all interfaces to allow external connections
listen_addresses = '*'

# Connection settings
max_connections = 100

# Logging for security auditing
log_connections = on
log_disconnections = on
log_duration = on
log_statement = 'mod'

# Increase connection visibility
log_hostname = on
log_line_prefix = '%m [%p] %h %u@%d '
log_error_verbosity = verbose

# SSL cipher configuration (secure defaults)
ssl_ciphers = 'HIGH:MEDIUM:+3DES:!aNULL'
ssl_prefer_server_ciphers = on
ssl_min_protocol_version = 'TLSv1.2'
